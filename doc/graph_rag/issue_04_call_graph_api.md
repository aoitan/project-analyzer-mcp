# Phase 2: コールグラフ（トレースアビリティ）APIの実装

## 概要

LLMが依存関係の中で「特定のリファクタリングの影響範囲（逆引き）」や「具体的な処理フローの理解（順引き）」を行うために必要な関数レベルのコールグラフを動的に取得できるツール（Graph RAG API）を提供する。アーキテクチャの大枠（Issue 03: Phase 1）が理解された後の「血液の巡り」を局所的に可視化する役割を果たす。

## 要件

- 関数呼び出し（Call expression）の取得とCaller/Callee関係のマッピング
- 以下のような情報をLLMに提供する `get_call_graph(FuncName, Depth)` （または深さを任意に設定可能なツール群）の定義
  - 呼び出し元関数（Caller: 逆引き方向）のリスト
  - 呼び出し先関数（Callee: 順引き方向）のリスト
  - 探索深度に応じた呼び出しチェーンの部分木
- MCP仕様に沿ったJSON形式の応答設計と、レスポンスへのLLM向け「自然言語メタデータ（ヒント）」の付与（なぜこの分岐があるかの要約など）

## 関連仕様

- `doc/graph_rag/specification.md` の「Phase 2: トレースアビリティ」

## 完了条件

- 特定の関数を与えた際、その関数を呼び出している他の関数（逆）や、内部で呼び出している関数（順）のグラフエッジを深さつきで取得できること
- Issue 01等のLSPアダプタ、または自社で実装・拡張されたParserから情報が供給されること
- テストが追加されていること
