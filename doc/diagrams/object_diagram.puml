@startuml

object "mcpServerInstance" as ServerInstance {
  name = "mcp-code-analysis-server"
  version = "1.0.0"
}

object "analysisService" as ASInstance {
  swiftParser = "swiftParserInstance"
  parsedProjects = Map<string, CodeChunk[]>
  chunksDir = "./data/chunks"
}

object "swiftParserInstance" as SPInstance

object "fileSystem" as FSInstance

object "parsedProjectsCache" as Cache {
  key = "/Users/ma-yabushita/00_work/study/ai/toy"
  value = CodeChunk[]
}

object "dummySwiftFile" as DummyFile {
  path = "/Users/ma-yabushita/00_work/study/ai/toy/src/__tests__/dummy.swift"
}

object "chunkFile1" as ChunkFile1 {
  path = "./data/chunks/func_dummyFunction1_param___-__Int.json"
  content = "{ ... }"
}

object "chunkFile2" as ChunkFile2 {
  path = "./data/chunks/func_dummyFunction2__.json"
  content = "{ ... }"
}

ServerInstance "1" -- "1" ASInstance : uses
ASInstance "1" -- "1" SPInstance : uses
ASInstance "1" -- "1" FSInstance : interacts with
ASInstance "1" -- "1" Cache : manages
Cache "1" -- "*" DummyFile : contains chunks from
FSInstance "1" -- "*" ChunkFile1 : stores
FSInstance "1" -- "*" ChunkFile2 : stores

@enduml
