# チャンク永続化層の分離

## 概要

`AnalysisService` にチャンクの永続化ロジック（`saveChunk`, `loadChunk`）が直接結合しており、責任分解が不十分です。

## 詳細

### 優先度

中

### 問題点

- `AnalysisService` がコード解析のオーケストレーションとチャンクの永続化の両方の責務を負っています。
- これにより、`AnalysisService` のコードが肥大化し、チャンクの永続化方法を変更する際に `AnalysisService` 全体を変更する必要が生じます。
- クリーンアーキテクチャの原則である層の分離が不十分です。

### 解決方法

- [ ] チャンクの永続化ロジックを独立したモジュール（例: `ChunkStorageService`）として分離します。
- [ ] `AnalysisService` は `ChunkStorageService` を依存性注入で受け取るようにします。
- [ ] これにより、`AnalysisService` はコード解析のオーケストレーションに専念し、永続化層の変更が `AnalysisService` に影響を与えないようになります。

## その他

ロードマップの「フェーズ1: コア機能の強化と安定化」の一部として対応を検討します。
