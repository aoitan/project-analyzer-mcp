# `src/parser.ts` の `getLineNumber` の正確性に関する問題

## 概要
`src/parser.ts` の `getLineNumber` メソッドは、`SourceKitten` のバイトオフセットから行番号を計算していますが、現在の実装は非常に基本的なものであり、マルチバイト文字や異なる改行コード（CRLFなど）を考慮していません。

## 詳細
### 優先度
中

### 問題点
*   現在の `getLineNumber` は、ファイルの内容を1バイトずつ走査し、`\n` の出現回数で行番号を計算しています。これは、UTF-8などのマルチバイト文字エンコーディングのファイルや、CRLF（`\r\n`）のような改行コードを使用しているファイルに対して正確な行番号を返さない可能性があります。
*   `SourceKitten` のオフセットはバイトオフセットであるため、正確な行番号を特定するには、ファイルのエンコーディングを考慮したバイト数と文字数の変換が必要です。

### 解決方法
- [ ] `getLineNumber` メソッドを修正し、ファイルのエンコーディングを考慮した上で、`SourceKitten` から提供されるバイトオフセットから正確な行番号を計算できるようにします。より堅牢なテキスト処理ライブラリの利用も検討します。

## その他
ロードマップの「フェーズ1: コア機能の強化と安定化」の一部として対応を検討します。
