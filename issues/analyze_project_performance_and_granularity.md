# `analyze_project` のパフォーマンスと粒度の改善

## 概要

`analyze_project` ツールが大規模なプロジェクトでタイムアウトする問題があり、より粒度の細かいコード解析ツールが必要とされています。

## 詳細

### 優先度

高

### 問題点

- `analyze_project` ツールは、プロジェクト全体を解析するため、ファイル数が多い場合に処理時間が長くなり、タイムアウトする可能性があります。
- LLMが特定のファイルやコードチャンクのみを必要とする場合でも、プロジェクト全体を解析する必要があり、非効率です。

### 解決方法

- [ ] `analyze_project` ツールを非同期処理として実装し、必ず一定時間で応答するようにします。
- [ ] 解析途中でも応答し、その際に解析途中であることを明示します。
- [ ] 解析はバックグラウンドで継続します。
- [ ] 再度のリクエスト時に、ジョブが完了していなかったら進捗を返し、完了していたら更新のあるファイルのみを解析する増分解析を行います。
- [ ] 特定のファイルのみを解析し、そのファイルのコードチャンクを生成・更新する新しいツール（例: `analyze_file`）を導入します。
- [ ] 既存のツール（`get_chunk`、`get_function_chunk` など）が、必要に応じてチャンクを生成・更新するロジックを持つように拡張することを検討します。
- [ ] チャンクのキャッシュ戦略を改善し、変更されたファイルのみを再解析するようにします。

## その他

ロードマップの「フェーズ1: コア機能の強化と安定化」または「フェーズ4: デプロイメントと運用」に該当します。
