# テスト: エラーケースの網羅性不足

## 概要
現在のテストスイートでは、MCPサーバーのツールがエラーを返すシナリオ（例: 存在しないチャンクIDの要求、不正なファイルパスの指定、SourceKittenの実行失敗など）が十分にテストされていません。

## 詳細
### 優先度
高

### 問題点
*   `get_chunk` ツールで存在しない `chunkId` が渡された場合に、期待されるエラーメッセージが返されることをテストしていません。
*   `list_functions_in_file` や `get_function_chunk` ツールで存在しない `filePath` が渡された場合に、適切なエラー（または空の配列/null）が返されることをテストしていません。
*   `SourceKitten` の実行が失敗した場合（例: `sourcekitten` がインストールされていない、Swiftファイルが不正な構文である）の `parser.ts` のエラーハンドリングがテストされていません。

### 解決方法
- [ ] 各ツールのコールバックにおいて、エラーを返す可能性のある入力に対してテストケースを追加します。
- [ ] `get_chunk` のテストに、存在しない `chunkId` を渡した場合のテストケースを追加し、`{ status: 'error', message: 'Chunk not found.' }` が返されることを検証します。
- [ ] `list_functions_in_file` や `get_function_chunk` のテストに、存在しない `filePath` を渡した場合のテストケースを追加し、適切なエラーハンドリングが行われることを検証します。
- [ ] `parser.ts` の `execPromise` がエラーをスローするシナリオをモックし、`parseFile` や `getFunctionContent` が適切にエラーを処理し、空の配列や `null` を返すことを検証します。

## その他
ロードマップの「フェーズ1: コア機能の強化と安定化」の「テストカバレッジの向上」に該当します。
